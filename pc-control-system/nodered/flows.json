[
    {
        "id": "tab-pc-control",
        "type": "tab",
        "label": "PC Control - Alexa",
        "disabled": false,
        "info": "Controle do PC via Alexa usando emulação Hue local"
    },
    {
        "id": "comment-intro",
        "type": "comment",
        "z": "tab-pc-control",
        "name": "=== PC CONTROL via ALEXA ===",
        "info": "Instale node-red-contrib-alexa-local via Palette Manager.\nDepois diga: 'Alexa, descobrir dispositivos'.\n\nComandos:\n- 'Alexa, ligar modo cinema'\n- 'Alexa, desligar PC'\n- 'Alexa, ligar modo console'\n- 'Alexa, colocar volume do PC em 50%'",
        "x": 200,
        "y": 40,
        "wires": []
    },
    {
        "id": "alexa-shutdown",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "PC Desligar",
        "inputtrigger": true,
        "x": 160,
        "y": 120,
        "wires": [["http-shutdown"]]
    },
    {
        "id": "http-shutdown",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST shutdown",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://pc-control-server:3000/api/command/shutdown",
        "tls": "",
        "persist": false,
        "proxy": "",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 120,
        "wires": [[]]
    },
    {
        "id": "alexa-sleep",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "PC Suspender",
        "inputtrigger": true,
        "x": 170,
        "y": 180,
        "wires": [["http-sleep"]]
    },
    {
        "id": "http-sleep",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST sleep",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/sleep",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 180,
        "wires": [[]]
    },
    {
        "id": "alexa-cinema",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Modo Cinema",
        "inputtrigger": true,
        "x": 160,
        "y": 240,
        "wires": [["http-cinema"]]
    },
    {
        "id": "http-cinema",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST cinema-mode",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/cinema-mode",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 240,
        "wires": [[]]
    },
    {
        "id": "alexa-console",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Modo Console",
        "inputtrigger": true,
        "x": 170,
        "y": 300,
        "wires": [["http-console"]]
    },
    {
        "id": "http-console",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST console-mode",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/console-mode",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 300,
        "wires": [[]]
    },
    {
        "id": "alexa-retro",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Modo Retro",
        "inputtrigger": true,
        "x": 160,
        "y": 360,
        "wires": [["http-retro"]]
    },
    {
        "id": "http-retro",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST retro-console",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/retro-console",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 360,
        "wires": [[]]
    },
    {
        "id": "alexa-mute",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "PC Mute",
        "inputtrigger": true,
        "x": 150,
        "y": 420,
        "wires": [["http-mute"]]
    },
    {
        "id": "http-mute",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST mute",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/mute",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 420,
        "wires": [[]]
    },
    {
        "id": "alexa-night",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Night Mode",
        "inputtrigger": true,
        "x": 160,
        "y": 480,
        "wires": [["http-night"]]
    },
    {
        "id": "http-night",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST night-mode",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/night-mode",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 480,
        "wires": [[]]
    },
    {
        "id": "alexa-restart",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "PC Reiniciar",
        "inputtrigger": true,
        "x": 170,
        "y": 540,
        "wires": [["http-restart"]]
    },
    {
        "id": "http-restart",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST restart",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/restart",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 540,
        "wires": [[]]
    },
    {
        "id": "alexa-monitor",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Monitor PC",
        "inputtrigger": true,
        "x": 160,
        "y": 600,
        "wires": [["http-monitor"]]
    },
    {
        "id": "http-monitor",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST monitor-off",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/monitor-off",
        "headers": [{"keyType": "other", "keyValue": "Content-Type", "valueType": "other", "valueValue": "application/json"}],
        "x": 400,
        "y": 600,
        "wires": [[]]
    },
    {
        "id": "alexa-volume",
        "type": "alexa-local",
        "z": "tab-pc-control",
        "devicename": "Volume PC",
        "inputtrigger": true,
        "x": 160,
        "y": 680,
        "wires": [["func-volume"]]
    },
    {
        "id": "func-volume",
        "type": "function",
        "z": "tab-pc-control",
        "name": "Extrair volume %",
        "func": "// alexa-local envia bri (0-254) quando usado como dimmer\nvar bri = msg.payload.bri || msg.payload.on_request_bri || 127;\nvar volume = Math.round((bri / 254) * 100);\nmsg.payload = { volume: volume };\nmsg.headers = { 'Content-Type': 'application/json' };\nreturn msg;",
        "outputs": 1,
        "x": 400,
        "y": 680,
        "wires": [["http-volume"]]
    },
    {
        "id": "http-volume",
        "type": "http request",
        "z": "tab-pc-control",
        "name": "POST set-volume",
        "method": "POST",
        "ret": "obj",
        "url": "http://pc-control-server:3000/api/command/set-volume",
        "x": 620,
        "y": 680,
        "wires": [[]]
    }
]
